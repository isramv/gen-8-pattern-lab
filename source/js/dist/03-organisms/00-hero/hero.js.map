{"version":3,"sources":["03-organisms/00-hero/hero.js"],"names":["player","onYouTubeIframeAPIReady","YT","Player","events","onPlayerReady","onStateChange","autoplayEnabled","isMuted","mute","playVideo","stopVideo","evt","unloadModule","data","getWindowWidth","autoplayToggle","document","documentElement","classList","contains","add","remove","pauseVideo","resizeId","windowWidth","jQuery","window","width","on","clearTimeout","setTimeout","clientWidth"],"mappings":";;AACA,IAAIA,MAAJ;AACA,SAASC,uBAAT,GAAmC;AACjCD,WAAS,IAAIE,GAAGC,MAAP,CAAc,gBAAd,EAAgC;AACvCC,YAAQ;AACN,iBAAWC,aADL;AAEN,uBAAiBC;AAFX;AAD+B,GAAhC,CAAT;AAMD;;AAED,SAASD,aAAT,GAAyB;AACvB,MAAIE,iBAAJ,EAAuB;AACrB,QAAI,CAACP,OAAOQ,OAAP,EAAL,EAAuB;AACrBR,aAAOS,IAAP;AACAT,aAAOU,SAAP;AACD,KAHD,MAGO;AACLV,aAAOU,SAAP;AACD;AACF,GAPD,MAQK;AACH;AACAV,WAAOW,SAAP;AACD;AACF;;AAED,SAASL,aAAT,CAAuBM,GAAvB,EAA4B;AAC1B,MAAIL,iBAAJ,EAAuB;AACrBP,WAAOa,YAAP,CAAoB,UAApB,EADqB,CACY;AACjC,QAAGD,IAAIE,IAAJ,KAAa,CAAhB,EAAmB;AAAE;AACnBd,aAAOS,IAAP;AACAT,aAAOU,SAAP;AACD;AACF;AACF;;AAED,SAASH,eAAT,GAA2B;AACzB,SAAOQ,oBAAoB,GAApB,GAA0B,IAA1B,GAAiC,KAAxC;AACD;;AAED,SAASC,cAAT,GAA0B;AACxB,MAAIT,iBAAJ,EAAuB;AACrB;AACA;AACA,QAAI,CAACU,SAASC,eAAT,CAAyBC,SAAzB,CAAmCC,QAAnC,CAA4C,qBAA5C,CAAL,EAAyE;AACvE;AACAH,eAASC,eAAT,CAAyBC,SAAzB,CAAmCE,GAAnC,CAAuC,qBAAvC;AACArB,aAAOS,IAAP;AACAT,aAAOU,SAAP;AACD;AACF,GATD,MAUK;AACH,QAAIO,SAASC,eAAT,CAAyBC,SAAzB,CAAmCC,QAAnC,CAA4C,qBAA5C,CAAJ,EAAwE;AACtE;AACAH,eAASC,eAAT,CAAyBC,SAAzB,CAAmCG,MAAnC,CAA0C,qBAA1C;AACAtB,aAAOuB,UAAP;AACD;AACF;AACF;;AAED,IAAIC,QAAJ;AACA,IAAIC,cAAcC,OAAOC,MAAP,EAAeC,KAAf,EAAlB;AACAF,OAAOC,MAAP,EAAeE,EAAf,CAAkB,QAAlB,EAA4B,YAAW;AACrC;AACA;AACA,MAAIH,OAAOC,MAAP,EAAeC,KAAf,MAA0BH,WAA9B,EAA2C;AACzC;AACAA,kBAAcC,OAAOC,MAAP,EAAeC,KAAf,EAAd;AACAE,iBAAaN,QAAb;AACAA,eAAWO,WAAW,YAAU;AAC9Bf;AACD,KAFU,EAER,GAFQ,CAAX;AAGD;AACF,CAXD;;AAaA,SAASD,cAAT,GAA0B;AACxB,MAAIU,cAAc,CAAlB;AACA,MAAIR,SAASC,eAAT,IAA4BD,SAASC,eAAT,CAAyBc,WAAzD,EAAsE;AACpEP,kBAAcR,SAASC,eAAT,CAAyBc,WAAvC;AACD;AACD,SAAOP,WAAP;AACD","file":"hero.js","sourcesContent":["\nvar player;\nfunction onYouTubeIframeAPIReady() {\n  player = new YT.Player('autoplay-video', {\n    events: {\n      'onReady': onPlayerReady,\n      'onStateChange': onStateChange\n    }\n  });\n}\n\nfunction onPlayerReady() {\n  if (autoplayEnabled()) {\n    if (!player.isMuted()) {\n      player.mute();\n      player.playVideo();\n    } else {\n      player.playVideo();\n    }\n  }\n  else {\n    // Prevents the video from loading further.\n    player.stopVideo();\n  }\n}\n\nfunction onStateChange(evt) {\n  if (autoplayEnabled()) {\n    player.unloadModule('captions'); // removes the captions.\n    if(evt.data === 0) { // 0 means the video has finished.\n      player.mute();\n      player.playVideo();\n    }\n  }\n}\n\nfunction autoplayEnabled() {\n  return getWindowWidth() >= 768 ? true : false;\n}\n\nfunction autoplayToggle() {\n  if (autoplayEnabled()) {\n    // Even if it should be enabled, check the class to limit the interaction\n    // w/player API.\n    if (!document.documentElement.classList.contains('is-enabled-autoplay')) {\n      // Add the class and play the video.\n      document.documentElement.classList.add('is-enabled-autoplay');\n      player.mute();\n      player.playVideo();\n    }\n  }\n  else {\n    if (document.documentElement.classList.contains('is-enabled-autoplay')) {\n      // Remove the class and pause the video.\n      document.documentElement.classList.remove('is-enabled-autoplay');\n      player.pauseVideo();\n    }\n  }\n}\n\nvar resizeId;\nvar windowWidth = jQuery(window).width();\njQuery(window).on('resize', function() {\n  // Check if the window width has actually changed and it's not just iOS\n  // triggering a resize event on scroll.\n  if (jQuery(window).width() != windowWidth) {\n    // Update the width.\n    windowWidth = jQuery(window).width();\n    clearTimeout(resizeId);\n    resizeId = setTimeout(function(){\n      autoplayToggle();\n    }, 250);\n  }\n});\n\nfunction getWindowWidth() {\n  var windowWidth = 0;\n  if (document.documentElement && document.documentElement.clientWidth) {\n    windowWidth = document.documentElement.clientWidth;\n  }\n  return windowWidth;\n}\n"]}